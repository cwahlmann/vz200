10 REM GFX SETUP
30 M%=28:W%=256:H%=192:LW%=W%/8:BH%=2048/LW%
40 GOSUB 3000
50 FOR I=0 TO 3:OUT 32,M%+I:MODE(1):NEXT
100 REM GRAPH SETUP
110 PI=3.1415927
120 X0=-1:X1=1
130 Y0=-0.15:Y1=0.15
140 REM DRAW
150 GOSUB 500
160 GOSUB 1000
170 OUT 32,M%:REM SWITCH TO BANK 0
199 GOTO 199
200 REM FUNKTION IN: X OUT: Y
210 Y=(X+0.9)*(X+0.3)*(X-0.1)*(X-0.5)*(X-0.8)
220 RETURN
500 REM DRAW COORDSYSTEM
510 S$=STR$(Y1):X%=W%/2:Y%=0:GOSUB2100
520 S$=STR$(Y0):X%=W%/2:Y%=H%-5:GOSUB2100
530 S$=STR$(X0):X%=0:Y%=H%/2-6:GOSUB2100
540 S$=STR$(X1):X%=W%-4*LEN(S$):Y%=H%/2-6:GOSUB2100
520 S$=STR$((Y1+Y0)/2):X%=W%/2:Y%=H%/2-6:GOSUB2100
530 S$=STR$((X1+X0)/2):X%=W%/2-4*LEN(S$)-4:Y%=H%/2-6:GOSUB2100
600 Y%=H%/2:FOR X%=0 TO W%-1:GOSUB2000:NEXT
610 X%=W%/2:FOR Y%=0 TO H%-1:GOSUB2000:NEXT
620 RETURN
1000 REM DRAW GRAPH
1005 X=X0:GOSUB 200:Y%=(H%-1)-(Y-Y0)/(Y1-Y0)*(H%-1)
1010 FOR X%=0 TO W%-1
1020 X=X%/(W%-1)*(X1-X0)+X0
1030 GOSUB 200
1040 YO%=(H%-1)-(Y-Y0)/(Y1-Y0)*(H%-1)
1045 Y%=Y%+SGN(YO%-Y%)
1050 GOSUB 2000
1055 IF Y%<>YO% THEN 1045
1060 NEXT
1999 RETURN
2000 REM DRAW POINT
2010 REM IN: X%, Y%
2020 IF X%<0 OR X%>=W% OR Y%<0 OR Y%>=H% THEN RETURN
2030 B%=Y%/BH%:YY%=Y% AND (BH%-1)
2040 XX%=X%/8:C%=X% AND 7
2050 A=28672+YY%*LW%+XX%
2060 OUT 32,M%+B%:POKE A, PEEK(A) OR P%(C%)
2070 RETURN
2100 REM DRAW STRING IN: S$, X%, Y%
2105 XC%=X%/4
2110 FOR I%=1 TO LEN(S$)
2120 XX%=XC%/2:XO%=16-(XC% AND 1)*15
2130 C%=ASC(MID$(S$,I%,1))
2140 IF C%>=48 AND C%<58 THEN C%=C%-48:GOTO 2180
2150 IF C%=45 THEN C%=10:GOTO 2180
2155 IF C%=69 THEN C%=12:GOTO 2180
2150 IF C%<>46 THEN 2240
2170 C%=11
2180 FOR J%=0 TO 4
2190 B%=(Y%+J%)/BH%:YY%=(Y%+J%) AND (BH%-1)
2200 OUT 32,M%+B%
2210 A=28672+XX%+YY%*LW%
2220 POKE A, PEEK(A) OR (Z%(C%,J%)*XO%)
2230 NEXT J%
2240 XC%=XC%+1:NEXT I%
2250 RETURN
3000 REM INIT GFX CONSTANTS
3010 DIM P%(8):FOR I=0 TO 7:READ P%(I):NEXT
3020 DATA 128,64,32,16,8,4,2,1
3030 DIM Z%(13,5)
3040 FOR I=0 TO 12:FOR J=0 TO 4
3050 READ Z%(I,J)
3060 NEXT:NEXT
3070 DATA 7,5,5,5,7:REM 0
3080 DATA 2,6,2,2,7:REM 1
3090 DATA 7,1,7,4,7:REM 2
3100 DATA 7,1,3,1,7:REM 3
3110 DATA 4,5,7,1,1:REM 4
3120 DATA 7,4,7,1,7:REM 5
3130 DATA 7,4,7,5,7:REM 6
3140 DATA 7,1,1,1,1: REM 7
3150 DATA 7,5,7,5,7:REM 8
3160 DATA 7,5,7,1,1:REM 9
3170 DATA 0,0,7,0,0:REM -
3180 DATA 0,0,0,0,2:REM .
3190 DATA 2,5,0,0,0:REM E
3999 RETURN
